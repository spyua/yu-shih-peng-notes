<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ch.1 åŸºç¤è§€å¿µ â€” GCP KMS éå°ç¨±åŠ å¯†æ•™å­¸</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700;900&family=JetBrains+Mono:wght@400;500;600&family=Crimson+Pro:ital,wght@0,400;0,700;0,900;1,400&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #F6F3EE;
  --bg-warm: #EFEADF;
  --bg-card: #FFFFFF;
  --bg-dark: #16161D;
  --bg-code: #111118;
  --text: #2A2A35;
  --text-secondary: #5E5E6E;
  --text-muted: #9494A3;
  --accent: #D35233;
  --accent-hover: #B8432A;
  --accent-soft: #FADAD2;
  --teal: #1A9E8F;
  --teal-soft: #D0F0EA;
  --blue: #2563EB;
  --blue-soft: #DBEAFE;
  --gold: #C88B2E;
  --gold-soft: #FDF3DC;
  --border: #E0DCD4;
  --border-light: #EDEAE4;
  --shadow-sm: 0 1px 2px rgba(0,0,0,0.04);
  --shadow: 0 2px 8px rgba(0,0,0,0.05), 0 1px 2px rgba(0,0,0,0.04);
  --shadow-lg: 0 8px 30px rgba(0,0,0,0.08), 0 2px 6px rgba(0,0,0,0.04);
  --radius: 14px;
  --radius-sm: 8px;
  --content-width: 760px;
}
* { margin:0; padding:0; box-sizing:border-box; }
html { scroll-behavior: smooth; }
body {
  font-family: 'Noto Sans TC', sans-serif;
  background: var(--bg);
  color: var(--text);
  line-height: 1.85;
  font-size: 16px;
  -webkit-font-smoothing: antialiased;
}

/* ===== TOP NAV ===== */
.topnav { position:sticky; top:0; z-index:100; background:rgba(246,243,238,0.85); backdrop-filter:blur(16px) saturate(1.4); border-bottom:1px solid var(--border); padding:0 24px; }
.topnav-inner { max-width:var(--content-width); margin:0 auto; display:flex; align-items:center; height:56px; gap:24px; }
.topnav-brand { font-weight:900; font-size:14px; color:var(--accent); letter-spacing:-0.02em; text-decoration:none; white-space:nowrap; }
.topnav-chapters { display:flex; gap:2px; flex:1; justify-content:center; }
.topnav-ch { padding:6px 16px; font-size:13px; font-weight:600; color:var(--text-muted); text-decoration:none; border-radius:100px; transition:all 0.15s; white-space:nowrap; }
.topnav-ch:hover { color:var(--text); background:var(--bg-warm); }
.topnav-ch.active { color:var(--accent); background:var(--accent-soft); }
.topnav-progress { display:flex; gap:6px; align-items:center; }
.topnav-dot { width:8px; height:8px; border-radius:50%; background:var(--border); transition:all 0.2s; }
.topnav-dot.filled { background:var(--accent); }
.topnav-dot.current { background:var(--accent); box-shadow:0 0 0 3px var(--accent-soft); }
@media (max-width:640px) { .topnav-chapters { display:none; } }

/* ===== HERO ===== */
.ch-hero { padding:72px 24px 56px; position:relative; overflow:hidden; }
.ch-hero::after { content:''; position:absolute; bottom:0; left:0; right:0; height:1px; background:var(--border); }
.ch-hero-inner { max-width:var(--content-width); margin:0 auto; }
.ch-number { font-family:'Crimson Pro',serif; font-size:80px; font-weight:900; color:var(--accent); line-height:1; opacity:0.12; position:absolute; top:30px; right:max(24px,calc((100% - var(--content-width))/2)); user-select:none; }
.ch-overline { font-size:12px; font-weight:700; text-transform:uppercase; letter-spacing:0.15em; color:var(--accent); margin-bottom:12px; }
.ch-title { font-family:'Crimson Pro',serif; font-size:clamp(2rem,4.5vw,2.8rem); font-weight:900; line-height:1.25; margin-bottom:14px; color:var(--bg-dark); }
.ch-desc { font-size:17px; color:var(--text-secondary); max-width:540px; }

/* ===== MAIN ===== */
.main { max-width:var(--content-width); margin:0 auto; padding:48px 24px 80px; }
.section { margin-bottom:72px; }
.section-anchor { scroll-margin-top:72px; }
h2 { font-family:'Crimson Pro',serif; font-size:26px; font-weight:900; color:var(--bg-dark); margin-bottom:8px; line-height:1.3; }
.section-rule { width:40px; height:3px; background:var(--accent); border-radius:2px; margin-bottom:20px; }
h3 { font-size:19px; font-weight:700; margin:40px 0 12px; color:var(--bg-dark); }
p { margin-bottom:16px; }
strong { font-weight:700; }
code { font-family:'JetBrains Mono',monospace; background:var(--bg-warm); padding:2px 7px; border-radius:5px; font-size:0.87em; color:var(--accent); font-weight:500; }

/* Callouts */
.callout { border-radius:var(--radius); padding:24px 24px 24px 64px; margin:28px 0; position:relative; font-size:15px; }
.callout::before { position:absolute; left:22px; top:22px; font-size:24px; }
.callout .callout-title { font-weight:700; font-size:14px; margin-bottom:6px; }
.callout p { margin-bottom:8px; }
.callout p:last-child { margin-bottom:0; }
.callout-analogy { background:var(--gold-soft); border:1px solid #ECD9A8; }
.callout-analogy::before { content:'ğŸ’¡'; }
.callout-analogy .callout-title { color:#8B6914; }
.callout-analogy p { color:#6B5420; }
.callout-warning { background:#FEF2F2; border:1px solid #FECACA; }
.callout-warning::before { content:'âš ï¸'; }
.callout-warning p { color:#991B1B; }
.callout-tip { background:var(--teal-soft); border:1px solid #A7E8D8; }
.callout-tip::before { content:'âœ…'; }
.callout-tip .callout-title { color:#065F46; }
.callout-tip p { color:#065F46; }

/* Tables */
.table-wrap { background:var(--bg-card); border:1px solid var(--border); border-radius:var(--radius); overflow:hidden; margin:28px 0; box-shadow:var(--shadow-sm); }
.table-wrap table { width:100%; border-collapse:collapse; font-size:14.5px; }
.table-wrap th { background:var(--bg-dark); color:#fff; padding:13px 18px; text-align:left; font-weight:600; font-size:13px; }
.table-wrap td { padding:13px 18px; border-bottom:1px solid var(--border-light); vertical-align:top; }
.table-wrap tr:last-child td { border-bottom:none; }
.table-wrap tr:hover td { background:#FDFCFA; }
.tag { display:inline-block; padding:2px 10px; border-radius:6px; font-size:12px; font-weight:600; }
.tag-green { background:#D1FAE5; color:#065F46; }
.tag-blue { background:#DBEAFE; color:#1E40AF; }
.tag-orange { background:#FED7AA; color:#9A3412; }
.tag-red { background:#FEE2E2; color:#991B1B; }
.tag-purple { background:#EDE9FE; color:#5B21B6; }

/* Scenario cards */
.scenario-grid { display:flex; flex-direction:column; gap:16px; margin:28px 0; }
.scenario-card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 24px 24px 24px 28px;
  position: relative;
  transition: all 0.2s;
  overflow: hidden;
}
.scenario-card:hover { border-color: var(--accent); box-shadow: var(--shadow); }
.scenario-card::before {
  content: '';
  position: absolute;
  top: 0; left: 0;
  width: 4px; height: 100%;
  background: var(--accent);
}
.scenario-header { display:flex; align-items:center; gap:12px; margin-bottom:10px; }
.scenario-icon {
  width:38px; height:38px; border-radius:10px;
  display:flex; align-items:center; justify-content:center;
  font-size:17px; flex-shrink:0;
  background: #FEE2E2;
}
.scenario-title { font-weight:700; font-size:15px; }
.scenario-body { font-size:14.5px; color:var(--text-secondary); margin-bottom:0; }
.scenario-body code { font-size:12px; }
.scenario-consequence {
  margin-top:12px; padding-top:12px;
  border-top:1px dashed var(--border);
  font-size:13.5px; font-weight:600; color:#991B1B;
}

/* VS comparison */
.vs-row { display:flex; align-items:stretch; gap:0; margin:28px 0; }
.vs-col { flex:1; padding:28px 24px; border-radius:var(--radius); }
.vs-col.self-manage { background:#FEF2F2; border:1px solid #FECACA; }
.vs-col.use-kms { background:var(--teal-soft); border:1px solid #A7E8D8; }
.vs-divider {
  width:48px; height:48px; background:var(--bg-dark); color:#fff;
  border-radius:50%; display:flex; align-items:center; justify-content:center;
  font-weight:900; font-size:14px; flex-shrink:0; margin:0 -8px;
  z-index:1; box-shadow:var(--shadow); align-self:center;
}
.vs-title { font-weight:700; font-size:15px; margin-bottom:12px; }
.vs-items { text-align:left; font-size:14px; }
.vs-item { display:flex; align-items:flex-start; gap:8px; margin-bottom:8px; line-height:1.5; }
.vs-item:last-child { margin-bottom:0; }

/* Demos */
.demo {
  background:var(--bg-card); border:2px solid var(--border);
  border-radius:var(--radius); padding:36px 28px; margin:32px 0; text-align:center;
}
.demo h4 { font-size:16px; font-weight:700; margin-bottom:4px; display:flex; align-items:center; justify-content:center; gap:8px; }
.demo .demo-subtitle { font-size:13px; color:var(--text-muted); margin-bottom:20px; }
.demo-flow { display:flex; align-items:center; justify-content:center; gap:12px; flex-wrap:wrap; margin:16px 0; }
.demo-box {
  padding:12px 20px; border-radius:var(--radius-sm);
  font-family:'JetBrains Mono',monospace; font-size:14px;
  font-weight:500; min-width:120px; transition:all 0.4s ease;
}
.demo-box.plain { background:var(--blue-soft); color:#1E3A8A; border:2px solid #93C5FD; }
.demo-box.cipher { background:var(--bg-dark); color:#34D399; border:2px solid #374151; font-size:11px; max-width:240px; word-break:break-all; }
.demo-box.key-pub { border:2px dashed var(--teal); color:var(--teal); background:transparent; }
.demo-box.key-priv { border:2px dashed var(--accent); color:var(--accent); background:transparent; }
.demo-box.key-shared { border:2px dashed var(--gold); color:var(--gold); background:transparent; }
.demo-arrow { font-size:20px; color:var(--text-muted); flex-shrink:0; }
.demo-phase { font-size:12px; font-weight:700; text-transform:uppercase; letter-spacing:0.1em; color:var(--text-muted); margin:20px 0 8px; }
.demo-btn {
  background:var(--accent); color:#fff; border:none;
  padding:12px 32px; border-radius:var(--radius-sm);
  font-size:15px; font-weight:600; cursor:pointer;
  font-family:'Noto Sans TC',sans-serif; transition:all 0.2s; margin-top:20px;
}
.demo-btn:hover { background:var(--accent-hover); transform:translateY(-1px); box-shadow:0 4px 16px rgba(211,82,51,0.25); }
.demo-btn.teal-btn { background:var(--teal); }
.demo-btn.teal-btn:hover { background:#158578; box-shadow:0 4px 16px rgba(26,158,143,0.25); }
.demo-problem {
  display:inline-flex; align-items:center; gap:8px;
  background:#FEF2F2; border:1px solid #FECACA; color:#991B1B;
  padding:10px 20px; border-radius:100px; font-size:13px; font-weight:600;
  margin-top:16px; transition:opacity 0.4s;
}

/* Pipeline animation */
.pipeline-section { margin: 24px 0 12px; }
.pipeline-label {
  display:inline-block; font-size:13px; font-weight:700;
  padding:6px 16px; border-radius:8px; margin-bottom:12px;
}
.encrypt-bg { background:var(--blue-soft); color:#1E40AF; }
.decrypt-bg { background:var(--accent-soft); color:var(--accent); }

.pipeline { display:flex; flex-direction:column; align-items:center; }

.pipe-step {
  display:flex; gap:14px; width:100%; max-width:520px;
  padding:16px 18px; border-radius:12px;
  border:2px solid var(--border); background:var(--bg);
  opacity:0.3; transform:translateY(6px);
  transition:all 0.5s cubic-bezier(0.22,1,0.36,1);
}
.pipe-step.active {
  opacity:1; transform:translateY(0);
  border-color:var(--accent); background:var(--bg-card);
  box-shadow:0 4px 20px rgba(211,82,51,0.1);
}
.pipe-step.done {
  opacity:0.85; transform:translateY(0);
  border-color:var(--teal); background:var(--bg-card);
}

.pipe-num {
  width:32px; height:32px; border-radius:50%;
  background:var(--border); color:#fff;
  display:flex; align-items:center; justify-content:center;
  font-size:13px; font-weight:800; flex-shrink:0;
  transition:background 0.4s;
}
.pipe-step.active .pipe-num { background:var(--accent); }
.pipe-step.done .pipe-num { background:var(--teal); }

.pipe-body { flex:1; min-width:0; }
.pipe-title {
  font-size:14px; font-weight:700; color:var(--text); margin-bottom:6px;
  display:flex; align-items:center; gap:8px; flex-wrap:wrap;
}
.pipe-badge {
  font-size:10px; font-weight:700; padding:2px 8px;
  border-radius:5px; text-transform:uppercase; letter-spacing:0.05em;
}
.teal-badge { background:var(--teal-soft); color:var(--teal); }

.pipe-data {
  font-family:'JetBrains Mono',monospace; font-size:12.5px;
  padding:8px 14px; border-radius:8px; margin:6px 0;
  word-break:break-all; font-weight:500;
}
.plain-data { background:var(--blue-soft); color:#1E40AF; border:1px solid #93C5FD; }
.bytes-data { background:#F0FDF4; color:#166534; border:1px solid #86EFAC; letter-spacing:1px; }
.cipher-data { background:var(--bg-dark); color:#34D399; border:1px solid #374151; }
.final-result { background:#D1FAE5; color:#065F46; border:2px solid #34D399; font-size:15px; font-weight:700; text-align:center; }

.pipe-note { font-size:12px; color:var(--text-muted); line-height:1.6; }
.pipe-note em { color:var(--accent); font-style:normal; font-weight:600; }

/* OAEP visual blocks */
.pipe-oaep-visual {
  display:flex; gap:4px; margin:8px 0; flex-wrap:wrap;
}
.oaep-block {
  padding:5px 10px; border-radius:6px; font-size:10.5px;
  font-weight:700; text-transform:uppercase; letter-spacing:0.03em;
  transition:all 0.3s;
}
.oaep-block.seed { background:#EDE9FE; color:#6D28D9; }
.oaep-block.hash { background:#FEF3C7; color:#92400E; }
.oaep-block.msg { background:var(--blue-soft); color:#1E40AF; }
.oaep-block.pad { background:#F3F4F6; color:#6B7280; }
.oaep-block.strikethrough { text-decoration:line-through; opacity:0.5; }
.pipe-oaep-visual.reverse .oaep-block.hash { background:#D1FAE5; color:#065F46; }

/* RSA formula */
.pipe-formula {
  font-family:'JetBrains Mono',monospace; font-size:15px;
  padding:10px 16px; background:#FDF4FF; border:1px solid #E9D5FF;
  border-radius:8px; margin:8px 0; text-align:center;
  color:#6D28D9; font-weight:600;
}
.f-var { color:#7C3AED; }
.f-exp { color:var(--accent); font-size:12px; }

.pipe-key-badge {
  display:inline-block; font-size:11px; font-weight:700;
  padding:3px 12px; border-radius:6px; margin:4px 0;
}
.pub-key-tag { background:var(--teal-soft); color:var(--teal); }
.priv-key-tag { background:var(--accent-soft); color:var(--accent); }

/* Connectors */
.pipe-connector {
  display:flex; flex-direction:column; align-items:center;
  height:28px; opacity:0; transition:opacity 0.3s;
}
.pipe-connector.visible { opacity:1; }
.pipe-connector-line { width:2px; flex:1; background:var(--border); }
.pipe-connector-arrow { font-size:10px; color:var(--accent); line-height:1; }

/* Transfer bar */
.pipeline-transfer {
  display:flex; align-items:center; gap:12px;
  margin:20px 0; opacity:0; transition:opacity 0.5s;
}
.pipeline-transfer.visible { opacity:1; }
.transfer-line { flex:1; height:2px; background:var(--accent); border-radius:1px; }
.transfer-label {
  font-size:12px; font-weight:700; color:var(--accent);
  white-space:nowrap; padding:6px 14px;
  background:var(--accent-soft); border-radius:100px;
}

/* Controls */
.pipeline-controls { margin-top:24px; text-align:center; }
.pipeline-status {
  font-size:13px; font-weight:600; color:var(--text-secondary);
  margin-top:10px; min-height:20px;
}

/* Sign vs Encrypt cards */
.sign-vs-card {
  background:var(--bg-card); border:1px solid var(--border);
  border-radius:var(--radius); padding:28px; margin:24px 0;
  box-shadow:var(--shadow-sm); overflow:hidden;
}
.svc-label {
  font-size:14px; font-weight:700; margin-bottom:20px;
  padding:6px 14px; border-radius:8px; display:inline-block;
}
.encrypt-label { background:var(--blue-soft); color:#1E40AF; }
.sign-label { background:#FEF3C7; color:#92400E; }
.svc-flow {
  display:flex; align-items:center; justify-content:center;
  gap:12px; flex-wrap:wrap;
}
.svc-actor { text-align:center; flex-shrink:0; }
.svc-actor-icon {
  width:48px; height:48px; border-radius:12px;
  display:flex; align-items:center; justify-content:center;
  font-size:22px; margin:0 auto 6px;
}
.svc-actor-name { font-size:12px; font-weight:700; color:var(--text-secondary); }
.svc-step-group {
  display:flex; align-items:center; gap:8px; flex-wrap:wrap;
  justify-content:center;
}
.svc-step-box {
  display:flex; flex-direction:column; align-items:center; gap:4px;
  padding:10px 16px; border:2px dashed; border-radius:10px;
  font-size:13px; font-weight:600; color:var(--text);
}
.svc-key-badge {
  font-size:11px; font-weight:700; padding:2px 10px;
  border-radius:6px; white-space:nowrap;
}
.svc-arrow { font-size:18px; color:var(--text-muted); flex-shrink:0; }
.svc-data {
  padding:8px 16px; background:var(--bg-warm); border-radius:8px;
  font-size:12px; font-weight:600; color:var(--text-secondary);
  font-family:'JetBrains Mono',monospace;
}
.svc-purpose {
  margin-top:16px; padding-top:14px; border-top:1px dashed var(--border);
  font-size:13.5px; color:var(--text-secondary); text-align:center;
}

/* Algorithm cards */
.algo-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(210px,1fr)); gap:16px; margin:28px 0; }
.algo-card {
  background:var(--bg-card); border:1px solid var(--border);
  border-radius:var(--radius); padding:24px; transition:all 0.2s; position:relative;
}
.algo-card:hover { border-color:var(--accent); box-shadow:var(--shadow); transform:translateY(-2px); }
.algo-card.highlighted { border-color:var(--accent); border-width:2px; }
.algo-card.highlighted::after {
  content:'â† æˆ‘å€‘ç”¨é€™å€‹'; position:absolute; top:12px; right:12px;
  background:var(--accent); color:#fff; font-size:11px; font-weight:700;
  padding:3px 10px; border-radius:6px;
}
.algo-name { font-family:'JetBrains Mono',monospace; font-size:15px; font-weight:600; margin-bottom:4px; }
.algo-type { font-size:12px; font-weight:600; margin-bottom:10px; }
.algo-desc { font-size:13.5px; color:var(--text-secondary); margin-bottom:0; line-height:1.65; }

/* Algorithm breakdown */
.algo-breakdown {
  background:var(--bg-code); border-radius:12px; padding:28px; margin:28px 0; overflow-x:auto;
}
.algo-breakdown pre {
  font-family:'JetBrains Mono',monospace; font-size:14px; line-height:2.2;
  color:#E2E8F0; white-space:pre; margin:0;
}
.algo-breakdown .part { display:inline-block; padding:2px 8px; border-radius:4px; font-weight:600; }
.algo-breakdown .p1 { background:rgba(99,102,241,0.25); color:#A5B4FC; }
.algo-breakdown .p2 { background:rgba(52,211,153,0.2); color:#6EE7B7; }
.algo-breakdown .p3 { background:rgba(251,191,36,0.2); color:#FCD34D; }
.algo-breakdown .p4 { background:rgba(248,113,113,0.2); color:#FCA5A5; }
.algo-breakdown .label { color:#9CA3AF; font-size:12px; }

/* Chapter nav */
.ch-nav { display:flex; justify-content:space-between; align-items:stretch; gap:16px; padding-top:48px; border-top:1px solid var(--border); margin-top:72px; }
.ch-nav-link { display:flex; flex-direction:column; gap:4px; text-decoration:none; padding:20px 24px; border:1px solid var(--border); border-radius:var(--radius); background:var(--bg-card); transition:all 0.2s; flex:1; max-width:48%; }
.ch-nav-link:hover { border-color:var(--accent); box-shadow:var(--shadow); transform:translateY(-2px); }
.ch-nav-link.next { text-align:right; margin-left:auto; }
.ch-nav-label { font-size:12px; font-weight:600; text-transform:uppercase; letter-spacing:0.1em; color:var(--accent); }
.ch-nav-title { font-weight:700; font-size:15px; color:var(--text); }
.ch-nav-placeholder { flex:1; max-width:48%; }

.footer { text-align:center; padding:32px 24px; font-size:12.5px; color:var(--text-muted); border-top:1px solid var(--border); max-width:var(--content-width); margin:0 auto; }

.fade-in { opacity:0; transform:translateY(24px); animation:fadeUp 0.5s ease forwards; }
.fade-in:nth-child(2) { animation-delay:0.06s; }
.fade-in:nth-child(3) { animation-delay:0.12s; }
.fade-in:nth-child(4) { animation-delay:0.18s; }
.fade-in:nth-child(5) { animation-delay:0.24s; }
@keyframes fadeUp { to { opacity:1; transform:translateY(0); } }

@media (max-width:640px) {
  .demo-flow { flex-direction:column; }
  .demo-arrow { transform:rotate(90deg); }
  .vs-row { flex-direction:column; }
  .vs-divider { margin:-8px 0; align-self:center; }
  .ch-nav { flex-direction:column; }
  .ch-nav-link,.ch-nav-placeholder { max-width:100%; }
  .ch-number { display:none; }
  .algo-grid { grid-template-columns:1fr; }
  .svc-flow { flex-direction:column; }
  .svc-step-group { flex-direction:column; }
  .svc-arrow { transform:rotate(90deg); }
}
</style>
</head>
<body>

<!-- ===== TOP NAV ===== -->
<nav class="topnav">
  <div class="topnav-inner">
    <a class="topnav-brand" href="chapter1.html">KMS æ•™å­¸</a>
    <div class="topnav-chapters">
      <a class="topnav-ch active" href="chapter1.html">Ch.1 åŸºç¤è§€å¿µ</a>
      <a class="topnav-ch" href="chapter2.html">Ch.2 æ¶æ§‹èˆ‡æµç¨‹</a>
      <a class="topnav-ch" href="chapter3.html">Ch.3 å‹•æ‰‹å¯¦ä½œ</a>
      <a class="topnav-ch" href="chapter4.html">Ch.4 ç¨‹å¼å¯¦ä½œ</a>
    </div>
    <div class="topnav-progress">
      <div class="topnav-dot current"></div>
      <div class="topnav-dot"></div>
      <div class="topnav-dot"></div>
      <div class="topnav-dot"></div>
    </div>
  </div>
</nav>

<!-- ===== HERO ===== -->
<header class="ch-hero">
  <div class="ch-number">01</div>
  <div class="ch-hero-inner">
    <div class="ch-overline">Chapter 1 of 4</div>
    <h1 class="ch-title">åŸºç¤è§€å¿µ</h1>
    <p class="ch-desc">ä¸éœ€è¦å¯†ç¢¼å­¸èƒŒæ™¯ã€‚ç”¨ç”Ÿæ´»æ¯”å–»å¸¶ä½ ææ‡‚ KMS æ˜¯ä»€éº¼ã€ç‚ºä»€éº¼è¦ç”¨ã€å°ç¨±èˆ‡éå°ç¨±åŠ å¯†å·®åœ¨å“ªã€ä»¥åŠæˆ‘å€‘é¸ç”¨çš„æ¼”ç®—æ³•ã€‚</p>
  </div>
</header>

<!-- ===== CONTENT ===== -->
<main class="main">

  <!-- =========================================
       Section 1: What is KMS
       ========================================= -->
  <section class="section fade-in" id="what">
    <h2 class="section-anchor">KMS æ˜¯ä»€éº¼ï¼Ÿ</h2>
    <div class="section-rule"></div>
    <p><strong>KMS = Key Management Serviceï¼ˆé‡‘é‘°ç®¡ç†æœå‹™ï¼‰</strong></p>
    <p>Google Cloud æä¾›çš„é›²ç«¯æœå‹™ï¼Œå¹«ä½ <strong>å®‰å…¨åœ°ä¿ç®¡åŠ è§£å¯†ç”¨çš„é‡‘é‘°</strong>ã€‚ä½ ä¸ç”¨è‡ªå·±ç®¡é‡‘é‘°æª”æ¡ˆã€ä¸ç”¨æ“”å¿ƒé‡‘é‘°å¤–æ´©ï¼ŒGoogle çš„ç¡¬é«”å®‰å…¨æ¨¡çµ„ï¼ˆHSMï¼‰å¹«ä½ é–å¥½å¥½çš„ã€‚</p>

    <div class="callout callout-analogy">
      <div class="callout-title">ç”Ÿæ´»æ¯”å–»ï¼šéŠ€è¡Œä¿éšªç®±</div>
      <p>ä½ æœ‰ä¸€æŠŠå¾ˆé‡è¦çš„é‘°åŒ™ï¼Œå¯ä»¥æ”¾åœ¨å®¶è£¡æŠ½å±œï¼ˆè‡ªå·±ç®¡ï¼‰ï¼Œä½†è¬ä¸€è¢«å·å°±å®Œè›‹äº†ã€‚</p>
      <p>KMS å°±åƒ<strong>æŠŠé‘°åŒ™å­˜åˆ°éŠ€è¡Œä¿éšªç®±</strong>ï¼šéŠ€è¡Œï¼ˆGoogleï¼‰æœ‰é‡‘åº«ã€æœ‰è­¦è¡›ã€æœ‰ç›£æ§ï¼Œæ¯”ä½ å®¶å®‰å…¨ä¸€è¬å€ã€‚ä½ éœ€è¦ç”¨é‘°åŒ™æ™‚ï¼Œå»éŠ€è¡Œç”³è«‹ä½¿ç”¨å°±å¥½ï¼Œé‘°åŒ™æ°¸é ä¸é›¢é–‹é‡‘åº«ã€‚</p>
    </div>
    <p>æ ¸å¿ƒç²¾ç¥ï¼š<strong>é‡‘é‘°æ°¸é ä¸é›¢é–‹ KMS</strong>ã€‚ä½ ä¸æœƒæŠŠç§é‘°ä¸‹è¼‰åˆ°ä½ çš„ serverï¼Œè€Œæ˜¯æŠŠè¦è§£å¯†çš„è³‡æ–™é€çµ¦ KMSï¼ŒKMS è§£å®Œå†æŠŠçµæœé‚„çµ¦ä½ ã€‚</p>
  </section>

  <!-- =========================================
       Section 2: Why KMS (ENHANCED with scenarios)
       ========================================= -->
  <section class="section fade-in" id="why">
    <h2 class="section-anchor">ç‚ºä»€éº¼ä¸è‡ªå·±ç®¡é‡‘é‘°å°±å¥½ï¼Ÿ</h2>
    <div class="section-rule"></div>
    <p>ã€Œæˆ‘æŠŠé‡‘é‘°æ”¾åœ¨ç’°å¢ƒè®Šæ•¸ä¸å°±å¥½äº†ï¼Ÿã€å¾ˆå¤šäººç¬¬ä¸€åæ‡‰æ˜¯é€™æ¨£ã€‚è®“æˆ‘å€‘çœ‹çœ‹è‡ªå·±ç®¡é‡‘é‘°ï¼Œåœ¨çœŸå¯¦ä¸–ç•Œæœƒå‡ºä»€éº¼äº‹ï¼š</p>

    <h3>è‡ªå·±ç®¡é‡‘é‘°çš„å››å€‹ç½é›£å ´æ™¯</h3>
    <div class="scenario-grid">
      <div class="scenario-card">
        <div class="scenario-header">
          <div class="scenario-icon">ğŸ’€</div>
          <div class="scenario-title">å ´æ™¯ä¸€ï¼šé‡‘é‘°è¢« commit åˆ° Git</div>
        </div>
        <p class="scenario-body">æ–°äººä¸å°å¿ƒæŠŠ <code>private_key.pem</code> commit é€² repoã€‚å°±ç®—é¦¬ä¸Šåˆªæ‰ï¼Œgit history è£¡é¢é‚„æ˜¯æœ‰ã€‚å¦‚æœæ˜¯ public repoï¼Œè‡ªå‹•åŒ–çˆ¬èŸ²å¹¾åˆ†é˜å…§å°±æœƒæŠ“èµ°ã€‚å³ä½¿æ˜¯ private repoï¼Œæ‰€æœ‰æœ‰å­˜å–æ¬Šçš„äººéƒ½èƒ½çœ‹åˆ°å®Œæ•´çš„ç§é‘°ã€‚</p>
        <div class="scenario-consequence">ğŸ’¥ é‡‘é‘°æ´©æ¼ â†’ ä»»ä½•äººéƒ½èƒ½è§£å¯†æ‰€æœ‰èº«åˆ†è­‰å­—è™Ÿ â†’ é‡å¤§å€‹è³‡å¤–æ´©äº‹ä»¶</div>
      </div>
      <div class="scenario-card">
        <div class="scenario-header">
          <div class="scenario-icon">ğŸ”“</div>
          <div class="scenario-title">å ´æ™¯äºŒï¼šServer æ¼æ´å°è‡´é‡‘é‘°è¢«è®€å–</div>
        </div>
        <p class="scenario-body">é‡‘é‘°æ”¾åœ¨ <code>application.yml</code> æˆ–ç’°å¢ƒè®Šæ•¸ã€‚æŸå¤© Server å‡ºäº†ä¸€å€‹ SSRF æ¼æ´ï¼Œæˆ– Spring Boot Actuator çš„ <code>/env</code> endpoint æ²’æœ‰é—œé–‰ï¼Œæ”»æ“Šè€…ç›´æ¥è®€åˆ°ç’°å¢ƒè®Šæ•¸è£¡çš„ç§é‘°ã€‚æˆ–æ˜¯æœ‰äºº SSH é€² server debugï¼Œé †æ‰‹ <code>cat</code> äº†ä¸€ä¸‹ config æª”ã€‚</p>
        <div class="scenario-consequence">ğŸ’¥ é‡‘é‘°åœ¨ server ä¸Šæ˜¯ã€Œæ˜æ–‡å­˜åœ¨ã€â†’ ä»»ä½•èƒ½å­˜å– server çš„äººæˆ–æ¼æ´éƒ½æ˜¯é¢¨éšªå…¥å£</div>
      </div>
      <div class="scenario-card">
        <div class="scenario-header">
          <div class="scenario-icon">ğŸ”„</div>
          <div class="scenario-title">å ´æ™¯ä¸‰ï¼šé‡‘é‘°è¼ªæ›¿è®Šæˆä¸€å ´æƒ¡å¤¢</div>
        </div>
        <p class="scenario-body">è³‡å®‰ç¨½æ ¸è¦æ±‚æ¯åŠå¹´æ›ä¸€æ¬¡é‡‘é‘°ã€‚ä½ å¾—ï¼šç”¢ç”Ÿæ–°é‡‘é‘° â†’ æ›´æ–°æ‰€æœ‰ server çš„ config â†’ é‡æ–°éƒ¨ç½²å…¨éƒ¨ç’°å¢ƒ â†’ é€šçŸ¥å» å•†æ›´æ›å…¬é‘° â†’ ç¢ºèªèˆŠå¯†æ–‡ç”¨èˆŠé‡‘é‘°èƒ½è§£ â†’ ç­‰éæ¸¡æœŸçµæŸæ‰èƒ½å»¢æ£„èˆŠé‡‘é‘°ã€‚5 å° server Ã— 3 å€‹ç’°å¢ƒï¼ˆdev/staging/prodï¼‰= æ”¹ 15 å€‹åœ°æ–¹ã€‚</p>
        <div class="scenario-consequence">ğŸ’¥ è¼ªæ›¿å¤ªéº»ç…© â†’ å¯¦å‹™ä¸Šæ ¹æœ¬ä¸æ› â†’ åŒä¸€æŠŠé‡‘é‘°ç”¨åˆ°å¤©è’åœ°è€ â†’ é¢¨éšªæŒçºŒç´¯ç©</div>
      </div>
      <div class="scenario-card">
        <div class="scenario-header">
          <div class="scenario-icon">ğŸ‘»</div>
          <div class="scenario-title">å ´æ™¯å››ï¼šå‡ºäº‹äº†ï¼Œå®Œå…¨æŸ¥ä¸åˆ°æ˜¯èª°åšçš„</div>
        </div>
        <p class="scenario-body">æŸå¤©ç™¼ç¾æœ‰ä¸€æ‰¹èº«åˆ†è­‰å­—è™Ÿè¢«è§£å¯†å¾Œå¤–æµã€‚è€é—†å•ï¼šã€Œèª°åœ¨ä»€éº¼æ™‚é–“è§£å¯†äº†å“ªäº›è³‡æ–™ï¼Ÿè§£å¯†äº†å¹¾æ¬¡ï¼Ÿã€ä½ å®Œå…¨ç­”ä¸å‡ºä¾† â€” å› ç‚ºä½ æ ¹æœ¬æ²’æœ‰è¨˜éŒ„ä»»ä½•é‡‘é‘°çš„ä½¿ç”¨è¡Œç‚ºã€‚æ‰€æœ‰äººéƒ½èƒ½ç”¨ã€æ²’æœ‰äººç•™ä¸‹ç—•è·¡ã€‚</p>
        <div class="scenario-consequence">ğŸ’¥ æ²’æœ‰ audit log â†’ ç„¡æ³•è¿½è¹¤ â†’ ç„¡æ³•é€šéå€‹è³‡æ³•æˆ– ISO 27001 ç¨½æ ¸ â†’ å¯èƒ½è¢«è£ç½°</div>
      </div>
    </div>

    <h3>ç”¨ KMS å¦‚ä½•å¾¹åº•è§£æ±ºï¼Ÿ</h3>
    <div class="vs-row">
      <div class="vs-col self-manage">
        <div class="vs-title" style="color:#991B1B">ğŸ˜° è‡ªå·±ç®¡é‡‘é‘°</div>
        <div class="vs-items">
          <div class="vs-item"><span>âœ—</span> é‡‘é‘°æ•£è½åœ¨ configã€envã€git</div>
          <div class="vs-item"><span>âœ—</span> Server è¢«å…¥ä¾µ = é‡‘é‘°è¢«å·èµ°</div>
          <div class="vs-item"><span>âœ—</span> è¼ªæ›¿è¦æ‰‹å‹•æ”¹ N å€‹åœ°æ–¹</div>
          <div class="vs-item"><span>âœ—</span> é›¶ç¨½æ ¸ç´€éŒ„ï¼Œå‡ºäº‹æŸ¥ä¸åˆ°</div>
          <div class="vs-item"><span>âœ—</span> æœ‰ server æ¬Šé™çš„äººéƒ½èƒ½ç”¨é‡‘é‘°</div>
        </div>
      </div>
      <div class="vs-divider">VS</div>
      <div class="vs-col use-kms">
        <div class="vs-title" style="color:#065F46">ğŸ˜ ç”¨ GCP KMS</div>
        <div class="vs-items">
          <div class="vs-item"><span>âœ“</span> ç§é‘°åœ¨ HSM ç¡¬é«”ä¸­ï¼Œç„¡æ³•åŒ¯å‡ºä¸‹è¼‰</div>
          <div class="vs-item"><span>âœ“</span> Server è¢«å…¥ä¾µä¹Ÿæ‹¿ä¸åˆ°ç§é‘°</div>
          <div class="vs-item"><span>âœ“</span> æ–°å¢ key version â†’ åŒ¯å‡ºå…¬é‘°ï¼Œæå®š</div>
          <div class="vs-item"><span>âœ“</span> Cloud Audit Logs è‡ªå‹•è¨˜éŒ„æ¯ä¸€æ¬¡æ“ä½œ</div>
          <div class="vs-item"><span>âœ“</span> IAM ç²¾ç¢ºæ§åˆ¶èª°èƒ½è§£å¯†</div>
        </div>
      </div>
    </div>

    <div class="callout callout-tip">
      <div class="callout-title">ä¸€å¥è©±ç¸½çµ</div>
      <p>è‡ªå·±ç®¡é‡‘é‘° = é‡‘é‘°åœ¨ä½ æ‰‹ä¸Šï¼Œä½ è¦è² è²¬ä¿ç®¡æ‰€æœ‰é¢¨éšªã€‚KMS = é‡‘é‘°åœ¨ Google çš„é‡‘åº«è£¡ï¼Œ<strong>å°±ç®—ä½ è‡ªå·±éƒ½æ‹¿ä¸åˆ°ç§é‘°</strong>ï¼Œåªèƒ½ã€Œè«‹ KMS å¹«ä½ è§£å¯†ã€ã€‚æ”»æ“Šè€…å…¥ä¾µä½ çš„ serverï¼Œæœ€å¤šæ‹¿åˆ°å‘¼å« KMS API çš„æ¬Šé™ï¼ˆå¯ä»¥å³æ™‚ç”¨ IAM æ’¤éŠ·ï¼‰ï¼Œä½†æ‹¿ä¸åˆ°é‡‘é‘°æœ¬èº«ã€‚</p>
    </div>
  </section>

  <!-- =========================================
       Section 3: Symmetric vs Asymmetric (BOTH animations)
       ========================================= -->
  <section class="section fade-in" id="asymmetric">
    <h2 class="section-anchor">å°ç¨±åŠ å¯† vs éå°ç¨±åŠ å¯†</h2>
    <div class="section-rule"></div>
    <p>é€™æ˜¯æ•´å€‹å¯¦ä½œçš„åŸºç¤è§€å¿µï¼Œ<strong>ææ‡‚é€™ä¸€æ®µï¼Œå¾Œé¢å°±é€šäº†</strong>ã€‚</p>

    <!-- Symmetric -->
    <h3>å°ç¨±åŠ å¯† â€” ä¸€æŠŠé‘°åŒ™é–å’Œé–‹</h3>
    <p>åŠ å¯†å’Œè§£å¯†ç”¨<strong>åŒä¸€æŠŠé‘°åŒ™</strong>ã€‚å°±åƒä½ å®¶å¤§é–€é‘°åŒ™ï¼Œé–é–€å’Œé–‹é–€åŒä¸€æŠŠã€‚</p>

    <div class="demo" id="sym-demo">
      <h4>ğŸ”’ äº’å‹•ç¤ºæ„ï¼šå°ç¨±åŠ å¯†</h4>
      <div class="demo-subtitle">åŠ å¯†å’Œè§£å¯†ç”¨ ğŸ”‘ åŒä¸€æŠŠå…±äº«é‡‘é‘°</div>

      <div class="demo-phase">åŠ å¯†æ–¹</div>
      <div class="demo-flow">
        <div class="demo-box plain" id="s-plain">A123456789</div>
        <div class="demo-arrow">ï¼‹</div>
        <div class="demo-box key-shared" id="s-key">ğŸ”‘ å…±äº«é‡‘é‘°</div>
        <div class="demo-arrow">â†’</div>
        <div class="demo-box cipher" id="s-cipher" style="opacity:0.25">x7Kp2mN...</div>
      </div>

      <div class="demo-phase">è§£å¯†æ–¹ï¼ˆä¹Ÿè¦æœ‰åŒä¸€æŠŠé‘°åŒ™ï¼‰</div>
      <div class="demo-flow" id="s-decrypt" style="opacity:0.25">
        <div class="demo-box cipher">x7Kp2mN...</div>
        <div class="demo-arrow">ï¼‹</div>
        <div class="demo-box key-shared">ğŸ”‘ åŒä¸€æŠŠé‡‘é‘°</div>
        <div class="demo-arrow">â†’</div>
        <div class="demo-box plain">A123456789</div>
      </div>

      <div class="demo-problem" id="s-problem" style="opacity:0">
        âš ï¸ è‡´å‘½å•é¡Œï¼šé€™æŠŠå…±äº«é‡‘é‘°è¦æ€éº¼ã€Œå®‰å…¨åœ°ã€äº¤çµ¦å°æ–¹ï¼Ÿå‚³è¼¸é€”ä¸­è¢«æ””æˆªå°±å…¨éƒ¨å®Œè›‹ï¼
      </div>
      <br>
      <button class="demo-btn teal-btn" onclick="runSymDemo()">â–¶ é»æˆ‘çœ‹å°ç¨±åŠ å¯†éç¨‹</button>
    </div>

    <p>å°ç¨±åŠ å¯†æœ€å¤§çš„å•é¡Œï¼šä½ è¦æ€éº¼<strong>å®‰å…¨åœ°æŠŠé‡‘é‘°äº¤çµ¦å» å•†</strong>ï¼Ÿç”¨ email å¯„ï¼Ÿç”¨ LINE å‚³ï¼Ÿç”¨ Slack è²¼ï¼Ÿé€™äº›é€šé“éƒ½å¯èƒ½è¢«æ””æˆªæˆ–è¢«å­˜ä¸‹ä¾†ï¼Œç­‰æ–¼æ²’åŠ å¯†ã€‚é€™å«åš<strong>ã€Œé‡‘é‘°äº¤æ›å•é¡Œã€ï¼ˆKey Exchange Problemï¼‰</strong>ã€‚</p>

    <!-- Asymmetric -->
    <h3>éå°ç¨±åŠ å¯† â€” å…©æŠŠé‘°åŒ™å„å¸å…¶è· â† æˆ‘å€‘ç”¨é€™å€‹</h3>
    <p>ç”¢ç”Ÿ<strong>ä¸€å°é‘°åŒ™</strong>ï¼š<strong style="color:var(--teal)">å…¬é‘°ï¼ˆPublic Keyï¼‰</strong> å’Œ <strong style="color:var(--accent)">ç§é‘°ï¼ˆPrivate Keyï¼‰</strong>ã€‚</p>

    <div class="callout callout-analogy">
      <div class="callout-title">ç”Ÿæ´»æ¯”å–»ï¼šä¿¡ç®±</div>
      <p><strong style="color:var(--teal)">å…¬é‘° = ä¿¡ç®±çš„æŠ•ä¿¡å£</strong> â€” ä»»ä½•äººéƒ½å¯ä»¥å¾€è£¡é¢æŠ•ä¿¡ï¼ˆåŠ å¯†ï¼‰ï¼Œä½ å¯ä»¥å¤§æ–¹å…¬é–‹çµ¦æ‰€æœ‰äººã€‚</p>
      <p><strong style="color:var(--accent)">ç§é‘° = ä¿¡ç®±çš„é‘°åŒ™</strong> â€” åªæœ‰ä½ èƒ½æ‰“é–‹ä¿¡ç®±è®€å–å…§å®¹ï¼ˆè§£å¯†ï¼‰ï¼Œé€™æŠŠé‘°åŒ™çµ•å°ä¸èƒ½çµ¦åˆ¥äººã€‚</p>
      <p>æ‰€ä»¥ï¼š<strong>å…¬é‘°éš¨ä¾¿çµ¦ï¼Œç§é‘°æ­»éƒ½ä¸çµ¦ã€‚</strong></p>
    </div>

    <div class="demo" id="asym-demo">
      <h4>ğŸ” RSA-OAEP åŠ è§£å¯†ï¼šæ¼”ç®—æ³•å…§éƒ¨æµç¨‹</h4>
      <div class="demo-subtitle">é»æ“ŠæŒ‰éˆ•ï¼Œé€æ­¥çœ‹å» å•†åŠ å¯† â†’ æˆ‘æ–¹ KMS è§£å¯†çš„å®Œæ•´å…§éƒ¨è™•ç†</div>

      <!-- ===== ENCRYPTION PIPELINE ===== -->
      <div class="pipeline-section">
        <div class="pipeline-label encrypt-bg">ğŸ­ å» å•†ç«¯ï¼šåŠ å¯†æµç¨‹</div>
        <div class="pipeline" id="enc-pipeline">
          <!-- Step 1 -->
          <div class="pipe-step" id="enc-s1">
            <div class="pipe-num">1</div>
            <div class="pipe-body">
              <div class="pipe-title">æ˜æ–‡è¼¸å…¥</div>
              <div class="pipe-data plain-data">A123456789</div>
              <div class="pipe-note">èº«åˆ†è­‰å­—è™Ÿï¼ˆ10 å­—å…ƒï¼‰</div>
            </div>
          </div>
          <div class="pipe-connector" id="enc-c1">
            <div class="pipe-connector-line"></div>
            <div class="pipe-connector-arrow">â–¼</div>
          </div>
          <!-- Step 2 -->
          <div class="pipe-step" id="enc-s2">
            <div class="pipe-num">2</div>
            <div class="pipe-body">
              <div class="pipe-title">UTF-8 ç·¨ç¢¼</div>
              <div class="pipe-data bytes-data">41 31 32 33 34 35 36 37 38 39</div>
              <div class="pipe-note">æ–‡å­— â†’ ä½å…ƒçµ„ï¼ˆ10 bytesï¼‰</div>
            </div>
          </div>
          <div class="pipe-connector" id="enc-c2">
            <div class="pipe-connector-line"></div>
            <div class="pipe-connector-arrow">â–¼</div>
          </div>
          <!-- Step 3 -->
          <div class="pipe-step" id="enc-s3">
            <div class="pipe-num">3</div>
            <div class="pipe-body">
              <div class="pipe-title">OAEP å¡«å…… <span class="pipe-badge teal-badge">é—œéµæ­¥é©Ÿ</span></div>
              <div class="pipe-oaep-visual">
                <div class="oaep-block seed">éš¨æ©Ÿ Seed</div>
                <div class="oaep-block hash">SHA-256 é›œæ¹Š</div>
                <div class="oaep-block msg">æ˜æ–‡ bytes</div>
                <div class="oaep-block pad">00 padding</div>
              </div>
              <div class="pipe-note">åŠ å…¥éš¨æ©Ÿæ•¸ + Hash â†’ å¡«å……åˆ° 512 bytes<br><em>åŒä¸€ä»½æ˜æ–‡æ¯æ¬¡åŠ å¯†çµæœéƒ½ä¸åŒï¼ˆå› ç‚ºéš¨æ©Ÿ Seedï¼‰</em></div>
            </div>
          </div>
          <div class="pipe-connector" id="enc-c3">
            <div class="pipe-connector-line"></div>
            <div class="pipe-connector-arrow">â–¼</div>
          </div>
          <!-- Step 4 -->
          <div class="pipe-step" id="enc-s4">
            <div class="pipe-num">4</div>
            <div class="pipe-body">
              <div class="pipe-title">RSA åŠ å¯†é‹ç®—</div>
              <div class="pipe-formula">
                <span class="f-var">å¯†æ–‡</span> = <span class="f-var">å¡«å……å¾Œæ˜æ–‡</span><sup class="f-exp">e</sup> mod <span class="f-var">n</span>
              </div>
              <div class="pipe-key-badge pub-key-tag">ğŸ”‘ å…¬é‘°æä¾› e å’Œ n</div>
              <div class="pipe-note">ç”¨å…¬é‘°ä¸­çš„æŒ‡æ•¸ e å’Œæ¨¡æ•¸ n åšå¤§æ•¸æ¬¡æ–¹å–é¤˜æ•¸</div>
            </div>
          </div>
          <div class="pipe-connector" id="enc-c4">
            <div class="pipe-connector-line"></div>
            <div class="pipe-connector-arrow">â–¼</div>
          </div>
          <!-- Step 5 -->
          <div class="pipe-step" id="enc-s5">
            <div class="pipe-num">5</div>
            <div class="pipe-body">
              <div class="pipe-title">Base64 ç·¨ç¢¼ â†’ å‚³è¼¸</div>
              <div class="pipe-data cipher-data">mK3x9Qp7LbR2wZ5nYhT8...</div>
              <div class="pipe-note">äºŒé€²ä½å¯†æ–‡ â†’ Base64 æ–‡å­—ï¼Œæ–¹ä¾¿ API å‚³é€</div>
            </div>
          </div>
        </div>
      </div>

      <!-- ===== TRANSFER ===== -->
      <div class="pipeline-transfer" id="transfer">
        <div class="transfer-line"></div>
        <div class="transfer-label">ğŸ“¨ å¯†æ–‡é€é API å‚³é€åˆ°æˆ‘æ–¹</div>
        <div class="transfer-line"></div>
      </div>

      <!-- ===== DECRYPTION PIPELINE ===== -->
      <div class="pipeline-section">
        <div class="pipeline-label decrypt-bg">ğŸ¢ æˆ‘æ–¹ KMSï¼šè§£å¯†æµç¨‹</div>
        <div class="pipeline" id="dec-pipeline">
          <!-- Step 6 -->
          <div class="pipe-step" id="dec-s1">
            <div class="pipe-num">6</div>
            <div class="pipe-body">
              <div class="pipe-title">Base64 è§£ç¢¼</div>
              <div class="pipe-data cipher-data">mK3x9Qp7LbR2wZ5nYhT8...</div>
              <div class="pipe-note">Base64 æ–‡å­— â†’ äºŒé€²ä½å¯†æ–‡ï¼ˆ512 bytesï¼‰</div>
            </div>
          </div>
          <div class="pipe-connector" id="dec-c1">
            <div class="pipe-connector-line"></div>
            <div class="pipe-connector-arrow">â–¼</div>
          </div>
          <!-- Step 7 -->
          <div class="pipe-step" id="dec-s2">
            <div class="pipe-num">7</div>
            <div class="pipe-body">
              <div class="pipe-title">RSA è§£å¯†é‹ç®—</div>
              <div class="pipe-formula">
                <span class="f-var">å¡«å……æ˜æ–‡</span> = <span class="f-var">å¯†æ–‡</span><sup class="f-exp">d</sup> mod <span class="f-var">n</span>
              </div>
              <div class="pipe-key-badge priv-key-tag">ğŸ—ï¸ ç§é‘°æä¾› dï¼ˆKMS ä¿ç®¡ï¼Œæ°¸ä¸åŒ¯å‡ºï¼‰</div>
              <div class="pipe-note">ç”¨ç§é‘°çš„ç§˜å¯†æŒ‡æ•¸ d åšé€†å‘é‹ç®—ï¼Œé‚„åŸå¡«å……å¾Œçš„æ˜æ–‡</div>
            </div>
          </div>
          <div class="pipe-connector" id="dec-c2">
            <div class="pipe-connector-line"></div>
            <div class="pipe-connector-arrow">â–¼</div>
          </div>
          <!-- Step 8 -->
          <div class="pipe-step" id="dec-s3">
            <div class="pipe-num">8</div>
            <div class="pipe-body">
              <div class="pipe-title">OAEP åå¡«å…… <span class="pipe-badge teal-badge">é©—è­‰æ­¥é©Ÿ</span></div>
              <div class="pipe-oaep-visual reverse">
                <div class="oaep-block seed">é©—è­‰ Seed</div>
                <div class="oaep-block hash">é©—è­‰ SHA-256 âœ“</div>
                <div class="oaep-block msg">å–å‡ºæ˜æ–‡</div>
                <div class="oaep-block pad strikethrough">ç§»é™¤ padding</div>
              </div>
              <div class="pipe-note">é©—è­‰ Hash å®Œæ•´æ€§ â†’ ç§»é™¤å¡«å…… â†’ å–å‡ºåŸå§‹ bytes<br><em>Hash ä¸å° = å¯†æ–‡è¢«ç«„æ”¹æˆ– padding éŒ¯èª¤ â†’ ç›´æ¥æ‹’çµ•</em></div>
            </div>
          </div>
          <div class="pipe-connector" id="dec-c3">
            <div class="pipe-connector-line"></div>
            <div class="pipe-connector-arrow">â–¼</div>
          </div>
          <!-- Step 9 -->
          <div class="pipe-step" id="dec-s4">
            <div class="pipe-num">9</div>
            <div class="pipe-body">
              <div class="pipe-title">UTF-8 è§£ç¢¼ â†’ å–å¾—æ˜æ–‡</div>
              <div class="pipe-data plain-data final-result">A123456789 âœ…</div>
              <div class="pipe-note">é‚„åŸèº«åˆ†è­‰å­—è™Ÿï¼Œå®Œæˆï¼</div>
            </div>
          </div>
        </div>
      </div>

      <div class="pipeline-controls">
        <button class="demo-btn" id="pipeline-btn" onclick="runPipeline()">â–¶ é–‹å§‹é€æ­¥æ¼”ç¤º</button>
        <div class="pipeline-status" id="pipeline-status"></div>
      </div>
    </div>

    <div class="table-wrap">
      <table>
        <thead><tr><th>ç‰¹æ€§</th><th>å°ç¨±åŠ å¯†ï¼ˆAESï¼‰</th><th>éå°ç¨±åŠ å¯†ï¼ˆRSAï¼‰</th></tr></thead>
        <tbody>
          <tr><td><strong>é‡‘é‘°æ•¸é‡</strong></td><td>1 æŠŠï¼ˆé›™æ–¹å…±ç”¨ï¼‰</td><td>2 æŠŠï¼ˆå…¬é‘°ï¼‹ç§é‘°ï¼‰</td></tr>
          <tr><td><strong>é€Ÿåº¦</strong></td><td><span class="tag tag-green">å¿«</span>ï¼ˆç¡¬é«”åŠ é€Ÿï¼‰</td><td><span class="tag tag-orange">è¼ƒæ…¢</span>ï¼ˆè¤‡é›œæ•¸å­¸é‹ç®—ï¼‰</td></tr>
          <tr><td><strong>é©åˆå ´æ™¯</strong></td><td>å¤§é‡è³‡æ–™åŠ å¯†ï¼ˆå¦‚ HTTPS å‚³è¼¸å…§å®¹ï¼‰</td><td>å°‘é‡è³‡æ–™ã€é‡‘é‘°äº¤æ›</td></tr>
          <tr><td><strong>é‡‘é‘°å‚³é</strong></td><td><span class="tag tag-red">å›°é›£</span>ï¼ˆæ€éº¼å®‰å…¨çµ¦å°æ–¹ï¼Ÿï¼‰</td><td><span class="tag tag-green">ç°¡å–®</span>ï¼ˆå…¬é‘°æœ¬ä¾†å°±èƒ½å…¬é–‹ï¼‰</td></tr>
          <tr><td><strong>æˆ‘å€‘çš„å ´æ™¯</strong></td><td>â€”</td><td><span class="tag tag-blue">âœ“ èº«åˆ†è­‰å­—è™ŸåŠ å¯†</span></td></tr>
        </tbody>
      </table>
    </div>

    <div class="callout callout-tip">
      <div class="callout-title">ç‚ºä»€éº¼æˆ‘å€‘é¸éå°ç¨±åŠ å¯†ï¼Ÿ</div>
      <p>å› ç‚º<strong>å» å•†éœ€è¦åŠ å¯†ã€æˆ‘å€‘éœ€è¦è§£å¯†</strong>ï¼Œé›™æ–¹æ˜¯ä¸åŒçµ„ç¹”ã€‚ç”¨éå°ç¨±åŠ å¯†ï¼Œæˆ‘å€‘åªè¦çµ¦å» å•†å…¬é‘°ï¼ˆä¸æ€•è¢«æ””æˆªï¼‰ï¼Œç§é‘°ç•™åœ¨ KMS è£¡æ°¸é ä¸å¤–æµã€‚èº«åˆ†è­‰å­—è™Ÿæ‰ 10 å€‹å­—å…ƒï¼ŒRSA ç›´æ¥åŠ å¯†ç¶½ç¶½æœ‰é¤˜ï¼Œä¸éœ€è¦æ··åˆåŠ å¯†ã€‚</p>
    </div>
  </section>

  <!-- =========================================
       Section 4: Sign vs Encrypt (NEW)
       ========================================= -->
  <section class="section fade-in" id="sign-vs-encrypt">
    <h2 class="section-anchor">åŒæ¨£æ˜¯éå°ç¨±é‡‘é‘°ï¼šç°½ç«  vs åŠ å¯†</h2>
    <div class="section-rule"></div>
    <p>ä¸Šä¸€æ®µå­¸åˆ°éå°ç¨±é‡‘é‘°æœ‰å…¬é‘°å’Œç§é‘°ã€‚ä½†åŒæ¨£æ˜¯éå°ç¨±é‡‘é‘°ï¼Œ<strong>æ ¹æ“šç”¨é€”ä¸åŒï¼Œå…¬ç§é‘°çš„è§’è‰²æœƒå®Œå…¨åéä¾†</strong>ã€‚é€™æ˜¯å¾ˆå¤šäººææ··çš„åœ°æ–¹ã€‚</p>

    <div class="callout callout-analogy">
      <div class="callout-title">å…ˆçœ‹æˆ‘å€‘ GCP è£¡å·²ç¶“æœ‰çš„ä¸€æŠŠ key</div>
      <p>æˆ‘å€‘å°ˆæ¡ˆè£¡å·²ç¶“æœ‰ä¸€æŠŠ <code>token-gen-rsa</code>ï¼Œç”¨é€”æ˜¯ã€Œéå°ç¨±å¼ç°½æ ¸ã€ï¼ˆASYMMETRIC_SIGNï¼‰ã€‚å®ƒæ˜¯æ‹¿ä¾†<strong>ç°½ç™¼ JWT Token</strong> çš„ã€‚</p>
      <p>ç¾åœ¨è¦æ–°å»ºçš„ <code>id-encrypt-key</code>ï¼Œç”¨é€”æ˜¯ã€Œéå°ç¨±å¼è§£å¯†ã€ï¼ˆASYMMETRIC_DECRYPTï¼‰ã€‚å®ƒæ˜¯æ‹¿ä¾†<strong>è§£å¯†å» å•†å‚³ä¾†çš„èº«åˆ†è­‰å­—è™Ÿ</strong>çš„ã€‚</p>
      <p>å…©æŠŠéƒ½æ˜¯ RSA éå°ç¨±é‡‘é‘°ï¼Œä½† <strong>purpose ä¸åŒã€ç”¨æ³•ä¸åŒã€ä¸èƒ½æ··ç”¨</strong>ã€‚</p>
    </div>

    <h3>åŠ å¯†ï¼šç¢ºä¿ã€Œåªæœ‰æˆ‘èƒ½çœ‹ã€</h3>
    <p>è§£æ±ºçš„å•é¡Œæ˜¯<strong>æ©Ÿå¯†æ€§</strong> â€” è³‡æ–™å…§å®¹ä¸è¢«ç¬¬ä¸‰æ–¹çœ‹åˆ°ã€‚</p>

    <!-- Encrypt visual -->
    <div class="sign-vs-card">
      <div class="svc-label encrypt-label">ğŸ” åŠ å¯†å ´æ™¯ï¼šå» å•†å‚³èº«åˆ†è­‰å­—è™Ÿ</div>
      <div class="svc-flow">
        <div class="svc-actor">
          <div class="svc-actor-icon" style="background:var(--bg-dark);color:#fff">ğŸ­</div>
          <div class="svc-actor-name">å» å•†</div>
        </div>
        <div class="svc-step-group">
          <div class="svc-step-box" style="border-color:var(--teal)">
            <span class="svc-key-badge" style="background:var(--teal-soft);color:var(--teal)">ğŸ”‘ å…¬é‘°</span>
            <span>åŠ å¯†</span>
          </div>
          <div class="svc-arrow">â†’</div>
          <div class="svc-data">å¯†æ–‡</div>
          <div class="svc-arrow">â†’</div>
          <div class="svc-step-box" style="border-color:var(--accent)">
            <span class="svc-key-badge" style="background:var(--accent-soft);color:var(--accent)">ğŸ—ï¸ ç§é‘°</span>
            <span>è§£å¯†</span>
          </div>
        </div>
        <div class="svc-actor">
          <div class="svc-actor-icon" style="background:var(--teal);color:#fff">ğŸ¢</div>
          <div class="svc-actor-name">æˆ‘æ–¹ (KMS)</div>
        </div>
      </div>
      <div class="svc-purpose">ç›®çš„ï¼š<strong>åªæœ‰æŒæœ‰ç§é‘°çš„æˆ‘æ–¹èƒ½çœ‹åˆ°æ˜æ–‡</strong></div>
    </div>

    <h3>ç°½ç« ï¼šè­‰æ˜ã€Œé€™çœŸçš„æ˜¯æˆ‘ç™¼çš„ã€</h3>
    <p>è§£æ±ºçš„å•é¡Œæ˜¯<strong>ä¸å¯å¦èªæ€§</strong> â€” è­‰æ˜é€™ä»½è³‡æ–™ç¢ºå¯¦æ˜¯æŸäººç°½ç™¼çš„ï¼Œä¸”æ²’æœ‰è¢«ç«„æ”¹ã€‚</p>

    <!-- Sign visual -->
    <div class="sign-vs-card">
      <div class="svc-label sign-label">âœï¸ ç°½ç« å ´æ™¯ï¼šç°½ç™¼ JWT Token</div>
      <div class="svc-flow">
        <div class="svc-actor">
          <div class="svc-actor-icon" style="background:var(--accent);color:#fff">ğŸ¢</div>
          <div class="svc-actor-name">æˆ‘æ–¹ (KMS)</div>
        </div>
        <div class="svc-step-group">
          <div class="svc-step-box" style="border-color:var(--accent)">
            <span class="svc-key-badge" style="background:var(--accent-soft);color:var(--accent)">ğŸ—ï¸ ç§é‘°</span>
            <span>ç°½å</span>
          </div>
          <div class="svc-arrow">â†’</div>
          <div class="svc-data">Token + ç°½ç« </div>
          <div class="svc-arrow">â†’</div>
          <div class="svc-step-box" style="border-color:var(--teal)">
            <span class="svc-key-badge" style="background:var(--teal-soft);color:var(--teal)">ğŸ”‘ å…¬é‘°</span>
            <span>é©—è­‰</span>
          </div>
        </div>
        <div class="svc-actor">
          <div class="svc-actor-icon" style="background:var(--bg-dark);color:#fff">ğŸ‘¤</div>
          <div class="svc-actor-name">é©—è­‰æ–¹</div>
        </div>
      </div>
      <div class="svc-purpose">ç›®çš„ï¼š<strong>ä»»ä½•äººéƒ½èƒ½é©—è­‰ Token ç¢ºå¯¦æ˜¯æˆ‘æ–¹ç°½ç™¼çš„</strong></div>
    </div>

    <h3>å…¬ç§é‘°çš„è§’è‰²å®Œå…¨ç›¸å</h3>
    <p>æ³¨æ„çœ‹ä¸Šé¢å…©å¼µåœ–ï¼Œå…¬é‘°å’Œç§é‘°çš„ä½¿ç”¨æ–¹å‘æ˜¯<strong>åéä¾†</strong>çš„ï¼š</p>

    <div class="table-wrap">
      <table>
        <thead><tr><th style="width:22%"></th><th style="width:39%">ğŸ” åŠ å¯†ï¼ˆEncryptï¼‰</th><th style="width:39%">âœï¸ ç°½ç« ï¼ˆSignï¼‰</th></tr></thead>
        <tbody>
          <tr>
            <td><strong>è§£æ±ºä»€éº¼å•é¡Œ</strong></td>
            <td>æ©Ÿå¯†æ€§ â€” å…§å®¹ä¸è¢«å·çœ‹</td>
            <td>ä¸å¯å¦èªæ€§ â€” è­‰æ˜æ˜¯æˆ‘ç™¼çš„</td>
          </tr>
          <tr>
            <td><strong>ç§é‘°åšä»€éº¼</strong></td>
            <td>è§£å¯†ï¼ˆé‚„åŸæ˜æ–‡ï¼‰</td>
            <td>ç°½åï¼ˆç”¢ç”Ÿç°½ç« ï¼‰</td>
          </tr>
          <tr>
            <td><strong>å…¬é‘°åšä»€éº¼</strong></td>
            <td>åŠ å¯†ï¼ˆç”¢ç”Ÿå¯†æ–‡ï¼‰</td>
            <td>é©—è­‰ï¼ˆç¢ºèªç°½ç« åˆæ³•ï¼‰</td>
          </tr>
          <tr>
            <td><strong>èª°æŒæœ‰ç§é‘°</strong></td>
            <td>æ¥æ”¶æ–¹ï¼ˆè¦è§£å¯†çš„äººï¼‰</td>
            <td>ç™¼è¡Œæ–¹ï¼ˆç°½ Token çš„äººï¼‰</td>
          </tr>
          <tr>
            <td><strong>æˆ‘å€‘çš„ Key</strong></td>
            <td><code>id-encrypt-key</code><br><span class="tag tag-blue">ASYMMETRIC_DECRYPT</span></td>
            <td><code>token-gen-rsa</code><br><span class="tag tag-orange">ASYMMETRIC_SIGN</span></td>
          </tr>
          <tr>
            <td><strong>KMS æ¼”ç®—æ³•</strong></td>
            <td>RSA-OAEP-4096-SHA256</td>
            <td>RSA-PSS-2048-SHA256</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="callout callout-warning">
      <p><strong>å…©æŠŠ key ä¸èƒ½æ··ç”¨ï¼</strong>KMS æœƒæ ¹æ“š purpose é™åˆ¶å¯å‘¼å«çš„ APIã€‚ç°½ç« ç”¨çš„ key ç„¡æ³•å‘¼å« <code>asymmetricDecrypt</code>ï¼ŒåŠ å¯†ç”¨çš„ key ä¹Ÿç„¡æ³•å‘¼å« <code>asymmetricSign</code>ã€‚æ‰€ä»¥æˆ‘å€‘çš„ GCP å°ˆæ¡ˆè£¡æœƒæœ‰å…©æŠŠå„å¸å…¶è·çš„ keyã€‚</p>
    </div>

    <div class="callout callout-analogy">
      <div class="callout-title">ç”Ÿæ´»æ¯”å–»</div>
      <p><strong>åŠ å¯†</strong>åƒå¯„æ›è™Ÿä¿¡ â€” ä½ æŠŠä¿¡å¡é€²åªæœ‰æ”¶ä»¶äººèƒ½æ‰“é–‹çš„ä¿éšªä¿¡å°ï¼Œä¿è­·çš„æ˜¯<strong>ä¿¡çš„å…§å®¹</strong>ã€‚</p>
      <p><strong>ç°½ç« </strong>åƒè“‹å…¬å¸å¤§å° â€” ä½ åœ¨å…¬æ–‡ä¸Šè“‹ç« ï¼Œä»»ä½•äººéƒ½èƒ½çœ‹åˆ°å…§å®¹ï¼Œä½†è“‹ç« è­‰æ˜<strong>é€™ä»½å…¬æ–‡ç¢ºå¯¦æ˜¯ä½ ç™¼çš„</strong>ã€‚</p>
    </div>
  </section>

  <!-- =========================================
       Section 5: Encryption Algorithms
       ========================================= -->
  <section class="section fade-in" id="algorithms">
    <h2 class="section-anchor">åŠ å¯†æ¼”ç®—æ³•ï¼šæˆ‘å€‘ç”¨äº†ä»€éº¼ï¼Ÿ</h2>
    <div class="section-rule"></div>
    <p>KMS å»ºé‡‘é‘°æ™‚è¦é¸ä¸€å€‹æ¼”ç®—æ³•ã€‚å…ˆåˆ¥æ…Œï¼Œä½ åªéœ€è¦ææ‡‚æˆ‘å€‘é¸çš„é‚£ä¸€å€‹å°±å¥½ã€‚ä½†å…ˆçœ‹å…¨è²Œæœ‰åŠ©æ–¼ç†è§£ç‚ºä»€éº¼é€™æ¨£é¸ã€‚</p>

    <h3>å¸¸è¦‹çš„åŠ å¯†æ¼”ç®—æ³•ä¸€è¦½</h3>
    <div class="algo-grid">
      <div class="algo-card">
        <div class="algo-name">AES</div>
        <div class="algo-type"><span class="tag tag-green">å°ç¨±åŠ å¯†</span></div>
        <p class="algo-desc">æœ€ä¸»æµçš„å°ç¨±åŠ å¯†æ¼”ç®—æ³•ã€‚é€Ÿåº¦æ¥µå¿«ï¼Œé©åˆåŠ å¯†å¤§é‡è³‡æ–™ã€‚HTTPSã€è³‡æ–™åº«åŠ å¯†ã€ç£ç¢ŸåŠ å¯†éƒ½ç”¨å®ƒã€‚</p>
      </div>
      <div class="algo-card highlighted">
        <div class="algo-name">RSA</div>
        <div class="algo-type"><span class="tag tag-blue">éå°ç¨±åŠ å¯†</span></div>
        <p class="algo-desc">æœ€ç¶“å…¸çš„éå°ç¨±æ¼”ç®—æ³•ã€‚åŸºæ–¼ã€Œå¤§æ•¸è³ªå› æ•¸åˆ†è§£å¾ˆé›£ã€çš„æ•¸å­¸åŸç†ã€‚é‡‘é‘°è¶Šé•·è¶Šå®‰å…¨ï¼Œæˆ‘å€‘ç”¨ 4096 bitã€‚</p>
      </div>
      <div class="algo-card">
        <div class="algo-name">ECC</div>
        <div class="algo-type"><span class="tag tag-purple">éå°ç¨±åŠ å¯†</span></div>
        <p class="algo-desc">æ©¢åœ“æ›²ç·šåŠ å¯†ã€‚ç”¨æ›´çŸ­çš„é‡‘é‘°å°±èƒ½é”åˆ°è·Ÿ RSA ç›¸ç•¶çš„å®‰å…¨æ€§ã€‚KMS ä¹Ÿæ”¯æ´ï¼Œä½†ä¸»è¦ç”¨åœ¨æ•¸ä½ç°½ç« ã€‚</p>
      </div>
    </div>

    <h3>æˆ‘å€‘çš„æ¼”ç®—æ³•åç¨±ï¼šé€æ®µæ‹†è§£</h3>
    <p>åœ¨ KMS å»ºé‡‘é‘°æ™‚ï¼Œé¸çš„æ¼”ç®—æ³•åç¨±æ˜¯ä¸€é•·ä¸²ã€‚åˆ¥è¢«åš‡åˆ°ï¼Œæ¯ä¸€æ®µéƒ½æœ‰å…·é«”å«ç¾©ï¼š</p>

    <div class="algo-breakdown">
<pre><span class="part p1">RSA</span>_DECRYPT_<span class="part p2">OAEP</span>_<span class="part p3">4096</span>_<span class="part p4">SHA256</span>

<span class="label"> â†‘ æ¼”ç®—æ³•       â†‘ å¡«å……æ–¹å¼      â†‘ é‡‘é‘°é•·åº¦    â†‘ é›œæ¹Šå‡½æ•¸</span></pre>
    </div>

    <div class="table-wrap">
      <table>
        <thead><tr><th style="width:20%">éƒ¨åˆ†</th><th style="width:20%">å€¼</th><th>ç™½è©±æ–‡è§£é‡‹</th></tr></thead>
        <tbody>
          <tr>
            <td><strong style="color:#6366F1">RSA</strong></td>
            <td>æ¼”ç®—æ³•</td>
            <td>ç”¨ RSA åšéå°ç¨±åŠ å¯†ã€‚æ­·å²æœ€æ‚ ä¹…ã€å„èªè¨€éƒ½æœ‰å®Œæ•´æ”¯æ´ã€å®‰å…¨æ€§å·²è¢«å……åˆ†é©—è­‰çš„æ¼”ç®—æ³•ã€‚</td>
          </tr>
          <tr>
            <td><strong style="color:#34D399">OAEP</strong></td>
            <td>å¡«å……æ–¹å¼</td>
            <td>RSA åŠ å¯†å‰éœ€è¦ã€Œå¡«å……ã€æ˜æ–‡åˆ°å›ºå®šé•·åº¦ã€‚<strong>OAEP</strong>ï¼ˆOptimal Asymmetric Encryption Paddingï¼‰æ˜¯ç›®å‰æœ€å®‰å…¨çš„å¡«å……æ–¹å¼ã€‚å¦ä¸€ç¨®èˆŠçš„å« <code>PKCS#1 v1.5</code>ï¼Œæœ‰å·²çŸ¥çš„ padding oracle æ”»æ“Šå¼±é»ï¼Œä¸å»ºè­°ä½¿ç”¨ã€‚</td>
          </tr>
          <tr>
            <td><strong style="color:#FCD34D">4096</strong></td>
            <td>é‡‘é‘°é•·åº¦</td>
            <td>é‡‘é‘°æœ‰ 4096 bitã€‚è¶Šé•·è¶Šé›£æš´åŠ›ç ´è§£ã€‚2048 æ˜¯æ¥­ç•Œæœ€ä½æ¨™æº–ï¼Œ4096 åœ¨å¯é è¦‹çš„æœªä¾†éƒ½éå¸¸å®‰å…¨ã€‚</td>
          </tr>
          <tr>
            <td><strong style="color:#FCA5A5">SHA256</strong></td>
            <td>é›œæ¹Šå‡½æ•¸</td>
            <td>OAEP å¡«å……å…§éƒ¨ä½¿ç”¨çš„é›œæ¹Šæ¼”ç®—æ³•ã€‚SHA-256 æ˜¯ç›®å‰æ¥­ç•Œæ¨™æº–ï¼Œæ¯”èˆŠç‰ˆ SHA-1 æ›´å®‰å…¨ã€‚</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="callout callout-warning">
      <p><strong>æœ€é‡è¦çš„ä¸€ä»¶äº‹</strong>ï¼šå» å•†åŠ å¯†æ™‚ç”¨çš„æ¼”ç®—æ³•å’Œå¡«å……æ–¹å¼å¿…é ˆ<strong>å®Œå…¨å°æ‡‰</strong>ã€‚åœ¨ Java è£¡å°±æ˜¯ <code>RSA/ECB/OAEPWithSHA-256AndMGF1Padding</code>ã€‚å¦‚æœå» å•†ä¸å°å¿ƒç”¨äº†åˆ¥çš„ paddingï¼ˆä¾‹å¦‚èˆŠçš„ <code>PKCS1Padding</code>ï¼‰ï¼ŒKMS è§£å¯†æœƒç›´æ¥å¤±æ•—ã€‚é€™æ˜¯æ•´åˆå¤±æ•—çš„<strong>æœ€å¸¸è¦‹åŸå› </strong>ã€‚</p>
    </div>

    <h3>RSA èƒ½åŠ å¯†å¤šå¤§çš„è³‡æ–™ï¼Ÿ</h3>
    <p>RSA æœ‰æ˜æ–‡é•·åº¦é™åˆ¶ã€‚RSA-4096 + OAEP-SHA256ï¼Œæœ€å¤šèƒ½åŠ å¯†ç´„ <strong>446 bytes</strong> çš„æ˜æ–‡ã€‚èº«åˆ†è­‰å­—è™Ÿã€ŒA123456789ã€åªæœ‰ 10 bytesï¼Œå®Œå…¨æ²’å•é¡Œã€‚</p>

    <div class="callout callout-analogy">
      <div class="callout-title">å¦‚æœæœªä¾†è¦åŠ å¯†æ›´å¤§çš„è³‡æ–™å‘¢ï¼Ÿ</div>
      <p>å¦‚æœæ˜æ–‡è¶…é 446 bytesï¼ˆä¾‹å¦‚åŠ å¯†æ•´ä»½æ–‡ä»¶ï¼‰ï¼Œå°±éœ€è¦ç”¨ <strong>Hybrid Encryption</strong>ï¼ˆæ··åˆåŠ å¯†ï¼‰ï¼šå…ˆç”¨ RSA åŠ å¯†ä¸€æŠŠéš¨æ©Ÿç”¢ç”Ÿçš„ AES é‡‘é‘°ï¼Œå†ç”¨é‚£æŠŠ AES é‡‘é‘°åŠ å¯†å¯¦éš›çš„å¤§è³‡æ–™ã€‚HTTPS å°±æ˜¯é€™æ¨£é‹ä½œçš„ã€‚ä½†æˆ‘å€‘ç›®å‰åŠ å¯†èº«åˆ†è­‰å­—è™Ÿä¸éœ€è¦ï¼Œç›´æ¥ç”¨ RSA å°±å¤ äº†ã€‚</p>
    </div>
  </section>

  <!-- Chapter Nav -->
  <nav class="ch-nav">
    <div class="ch-nav-placeholder"></div>
    <a class="ch-nav-link next" href="chapter2.html">
      <span class="ch-nav-label">ä¸‹ä¸€ç«  â†’</span>
      <span class="ch-nav-title">Ch.2 æ¶æ§‹èˆ‡æµç¨‹</span>
    </a>
  </nav>

</main>

<footer class="footer">GCP KMS éå°ç¨±åŠ å¯†æ•™å­¸ Â· åœ˜éšŠå…§éƒ¨å­¸ç¿’ç”¨</footer>

<script>
/* ===== Symmetric Demo ===== */
let symRunning = false;
function runSymDemo() {
  if (symRunning) return;
  symRunning = true;
  const cipher = document.getElementById('s-cipher');
  const plain = document.getElementById('s-plain');
  const key = document.getElementById('s-key');
  const decryptRow = document.getElementById('s-decrypt');
  const problem = document.getElementById('s-problem');
  const btn = document.querySelector('#sym-demo .demo-btn');

  cipher.style.opacity = '0.25';
  decryptRow.style.opacity = '0.25';
  problem.style.opacity = '0';
  btn.textContent = 'åŠ å¯†ä¸­â€¦';

  setTimeout(() => {
    plain.style.transform = 'scale(1.06)';
    plain.style.boxShadow = '0 0 24px rgba(200,139,46,0.3)';
    key.style.boxShadow = '0 0 20px rgba(200,139,46,0.3)';
  }, 200);

  setTimeout(() => {
    cipher.style.opacity = '1';
    cipher.style.transition = 'all 0.5s';
    cipher.style.boxShadow = '0 0 16px rgba(52,211,153,0.25)';
    plain.style.transform = 'scale(1)';
    plain.style.boxShadow = 'none';
    key.style.boxShadow = 'none';
    btn.textContent = 'è§£å¯†ä¸­â€¦';
  }, 900);

  setTimeout(() => {
    decryptRow.style.opacity = '1';
    decryptRow.style.transition = 'opacity 0.5s';
  }, 1600);

  setTimeout(() => {
    problem.style.opacity = '1';
    problem.style.transition = 'opacity 0.5s';
    btn.textContent = 'â–¶ å†çœ‹ä¸€æ¬¡';
    symRunning = false;
  }, 2200);
}

/* ===== Detailed Pipeline Demo ===== */
let pipeRunning = false;
function runPipeline() {
  if (pipeRunning) return;
  pipeRunning = true;
  const btn = document.getElementById('pipeline-btn');
  const status = document.getElementById('pipeline-status');
  const transfer = document.querySelector('.pipeline-transfer');

  // Reset all
  document.querySelectorAll('.pipe-step').forEach(s => { s.className = 'pipe-step'; });
  document.querySelectorAll('.pipe-connector').forEach(c => c.classList.remove('visible'));
  transfer.classList.remove('visible');
  btn.disabled = true;
  btn.textContent = 'æ¼”ç¤ºä¸­â€¦';

  const encSteps = [
    { el:'enc-s1', conn:'enc-c1', msg:'Step 1/9 â€” å» å•†è¼¸å…¥èº«åˆ†è­‰å­—è™Ÿæ˜æ–‡' },
    { el:'enc-s2', conn:'enc-c2', msg:'Step 2/9 â€” å°‡æ–‡å­—è½‰æ›ç‚º UTF-8 ä½å…ƒçµ„' },
    { el:'enc-s3', conn:'enc-c3', msg:'Step 3/9 â€” OAEP å¡«å……ï¼šåŠ å…¥éš¨æ©Ÿ Seed + SHA-256 é›œæ¹Š' },
    { el:'enc-s4', conn:'enc-c4', msg:'Step 4/9 â€” RSA æ ¸å¿ƒï¼šç”¨å…¬é‘°çš„ (e, n) åšå¤§æ•¸å†ªæ¬¡é‹ç®—' },
    { el:'enc-s5', conn:null,     msg:'Step 5/9 â€” å¯†æ–‡ Base64 ç·¨ç¢¼ï¼Œæº–å‚™å‚³é€' },
  ];
  const decSteps = [
    { el:'dec-s1', conn:'dec-c1', msg:'Step 6/9 â€” æˆ‘æ–¹æ”¶åˆ°å¯†æ–‡ï¼ŒBase64 è§£ç¢¼' },
    { el:'dec-s2', conn:'dec-c2', msg:'Step 7/9 â€” KMS ç”¨ç§é‘°çš„ d åšé€†å‘ RSA é‹ç®—' },
    { el:'dec-s3', conn:'dec-c3', msg:'Step 8/9 â€” OAEP åå¡«å……ï¼šé©—è­‰ Hash + ç§»é™¤ Padding' },
    { el:'dec-s4', conn:null,     msg:'Step 9/9 â€” é‚„åŸæ˜æ–‡ï¼Œè§£å¯†å®Œæˆï¼ğŸ‰' },
  ];

  let delay = 0;
  const stepDelay = 900;

  // Encryption steps
  encSteps.forEach((step, i) => {
    delay += stepDelay;
    setTimeout(() => {
      // Mark previous as done
      if (i > 0) document.getElementById(encSteps[i-1].el).classList.replace('active','done');
      document.getElementById(step.el).classList.add('active');
      if (step.conn) document.getElementById(step.conn).classList.add('visible');
      status.textContent = step.msg;
    }, delay);
  });

  // Mark last enc step done + show transfer
  delay += stepDelay;
  setTimeout(() => {
    document.getElementById('enc-s5').classList.replace('active','done');
    transfer.classList.add('visible');
    status.textContent = 'ğŸ“¨ å¯†æ–‡æ­£åœ¨å‚³é€åˆ°æˆ‘æ–¹â€¦';
  }, delay);

  // Decryption steps
  delay += stepDelay;
  decSteps.forEach((step, i) => {
    delay += stepDelay;
    setTimeout(() => {
      if (i > 0) document.getElementById(decSteps[i-1].el).classList.replace('active','done');
      document.getElementById(step.el).classList.add('active');
      if (step.conn) document.getElementById(step.conn).classList.add('visible');
      status.textContent = step.msg;
    }, delay);
  });

  // Done
  delay += stepDelay + 200;
  setTimeout(() => {
    document.getElementById('dec-s4').classList.replace('active','done');
    btn.disabled = false;
    btn.textContent = 'â–¶ å†çœ‹ä¸€æ¬¡';
    pipeRunning = false;
  }, delay);
}
</script>
</body>
</html>
